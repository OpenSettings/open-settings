{
  "version": 3,
  "sources": ["src/app/shared/models/error-type.model.ts", "src/app/shared/services/utility.service.ts"],
  "sourcesContent": ["export enum ErrorType {\r\n    Custom = 0,\r\n    Validation = 1,\r\n    Exception = 2\r\n}\r\n", "import { Injectable } from \"@angular/core\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { IError } from \"../models/response-error.model\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ErrorType } from \"../models/error-type.model\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilityService {\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  private internalError(errors: IError[], duration: number | undefined, action: string) {\r\n    if (errors.length > 1) {\r\n      const errorMessages = errors.map(error => `* ${error.description}`).join('\\n');\r\n      return this.snackBar.open(`Errors occurred:\\n${errorMessages}`, action, {\r\n        horizontalPosition: 'right',\r\n        verticalPosition: 'top',\r\n        duration: duration\r\n      });\r\n    } else if (errors.length === 1) {\r\n      const error = errors[0];\r\n\r\n      if (error.type === ErrorType.Validation) {\r\n        const validationFailures = error.validationFailures.map(v => `PropertyName: '${v.propertyName}', Message: '${v.message}'`).join('\\n');\r\n        return this.snackBar.open(`${error.title}: ${error.description} ${validationFailures}`, action, {\r\n          horizontalPosition: 'right',\r\n          verticalPosition: 'top',\r\n          duration: duration\r\n        });\r\n      } else {\r\n        return this.snackBar.open(`${error.title}: ${error.description}`, action, {\r\n          horizontalPosition: 'right',\r\n          verticalPosition: 'top',\r\n          duration: duration\r\n        });\r\n      }\r\n\r\n\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private internalSimpleError(messages: string[], duration: number | undefined, action: string) {\r\n    if (messages.length > 1) {\r\n      const errorMessages = messages.map(message => `* ${message}`).join('\\n');\r\n      return this.snackBar.open(`Errors occurred:\\n${errorMessages}`, action, {\r\n        horizontalPosition: 'right',\r\n        verticalPosition: 'top',\r\n        duration: duration\r\n      });\r\n    } else if (messages.length === 1) {\r\n      const error = messages[0];\r\n      return this.snackBar.open(error, action, {\r\n        horizontalPosition: 'right',\r\n        verticalPosition: 'top',\r\n        duration: duration\r\n      });\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  error(errors: IError[], duration: number | undefined) {\r\n    return this.internalError(errors, duration, 'Close');\r\n  }\r\n\r\n  errorWithRestart(errors: IError[], duration: number | undefined, dismissByAction: boolean) {\r\n    return this.internalError(errors, duration, 'Restart')?.afterDismissed().subscribe((action) => {\r\n      if (!dismissByAction || action.dismissedByAction) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  simpleError(message: string, duration: number | undefined) {\r\n    return this.internalSimpleError([message], duration, 'Close');\r\n  }\r\n\r\n  simpleErrorWithRestart(message: string, duration: number | undefined, dismissByAction: boolean) {\r\n    return this.internalSimpleError([message], duration, 'Restart')?.afterDismissed().subscribe((action) => {\r\n      if (!dismissByAction || action.dismissedByAction) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  copyToClipboard(text: string) {\r\n\r\n    navigator.clipboard.writeText(text)\r\n      .then(() => {\r\n        this.snackBar.open(`Copied to clipboard!`, 'Close', {\r\n          horizontalPosition: 'right',\r\n          verticalPosition: 'top',\r\n          duration: 1500\r\n        });\r\n      })\r\n      .catch(err => {\r\n      });\r\n  }\r\n\r\n  download(text: string, className: string) {\r\n    const blob = new Blob([text], { type: 'application/json' });\r\n    const downloadLink = document.createElement('a');\r\n    downloadLink.href = window.URL.createObjectURL(blob);\r\n    downloadLink.download = `settings.${className}.json`;\r\n    downloadLink.click();\r\n  }\r\n\r\n  upload(file: File): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.readAsText(file, 'UTF-8');\r\n\r\n        reader.onload = () => {\r\n          const content: string = reader.result as string;\r\n          resolve(content);\r\n        };\r\n\r\n        reader.onerror = (error) => {\r\n          reject(error);\r\n        };\r\n      } else {\r\n        reject(new Error('No file provided'));\r\n      }\r\n    });\r\n  }\r\n}"],
  "mappings": "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",
  "names": ["ErrorType"]
}
