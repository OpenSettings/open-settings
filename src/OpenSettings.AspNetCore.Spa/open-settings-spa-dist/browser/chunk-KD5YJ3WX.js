import{a as ye}from"./chunk-4VZSEJXQ.js";import{a as Se}from"./chunk-IDIORXPO.js";import{a as me}from"./chunk-NNDRUWYZ.js";import{a as we}from"./chunk-SCCDE5QU.js";import{a as Me,d as xe,e as _e,f as Ce,g as Le}from"./chunk-HLAZOYHB.js";import{B as ge,M as be,O as ve,b as ie,f as oe,i as ne,o as re,t as de,v as pe,w as he,x as ue,y as fe}from"./chunk-M66XJPMI.js";import{$ as V,$a as _,Da as y,Fa as h,Gb as Y,Ha as K,Ia as N,M as T,Mb as Z,N as D,Oa as a,Pa as s,Qa as x,R as j,S as U,U as b,Ua as P,Uc as I,Wb as w,Xa as g,Xb as q,Yb as ee,Z as v,Za as z,_ as A,_a as O,bb as F,da as u,db as $,ea as f,eb as H,fb as C,g as k,gb as d,hb as L,i as E,ib as W,jc as S,kb as Q,kc as M,kd as se,la as B,lb as G,ld as le,mb as J,nc as te,nd as ce,ob as X,oc as ae,ra as R,sa as p,ta as m}from"./chunk-YYVWG2ID.js";var Te=["*",[["mat-toolbar-row"]]],De=["*","mat-toolbar-row"],je=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=V({type:o,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let r=o;return r})(),ze=(()=>{let o=class o{constructor(i,t,e){this._elementRef=i,this._platform=t,this._document=e}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};o.\u0275fac=function(t){return new(t||o)(m(B),m(ae),m(Y))},o.\u0275cmp=v({type:o,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){if(t&1&&F(n,je,5),t&2){let c;$(c=H())&&(e._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(t,e){t&2&&(N(e.color?"mat-"+e.color:""),K("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",e._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[X],ngContentSelectors:De,decls:2,vars:0,template:function(t,e){t&1&&(O(Te),_(0),_(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let r=o;return r})();var Oe=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=A({type:o}),o.\u0275inj=U({imports:[I,I]});let r=o;return r})();var ke=(()=>{let o=class o{constructor(i,t,e){this.httpClient=i,this.authService=t,this.headers=new w,this.destroy$=new E,this.route=e.controllerOptions.route,this.authService.isAuthenticated$.pipe(D(this.destroy$)).subscribe(n=>{this.headers=n?new w({Authorization:`${this.authService.token}`}):new w})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getPaginatedLicenses(i){let t=this.route+"/v1/licenses/paginated",e=new q;i.pageIndex&&(e=e.append("page",i.pageIndex)),i.pageSize&&(e=e.append("size",i.pageSize)),i.searchTerm&&(e=e.append("searchTerm",i.searchTerm)),i.searchBy&&(e=e.append("searchBy",i.searchBy)),i.sortBy&&(e=e.append("sortBy",i.sortBy),i.sortDirection===ye.Desc&&(e=e.append("sortDirection",i.sortDirection)));let n=e.toString();return t+=n?"?"+n:"",this.httpClient.get(t,{headers:this.headers})}getCurrentLicense(){let i=this.route+"/v1/licenses/current";return this.httpClient.get(i,{headers:this.headers})}saveLicense(i){let t=this.route+"/v1/licenses";return this.httpClient.post(t,`"${i.licenseKey}"`,{headers:this.headers.set("Content-Type","application/json")})}deleteLicense(i){let t=this.route+"/v1/licenses/"+encodeURIComponent(i);return this.httpClient.delete(t,{headers:this.headers})}getLicenseUpdateMessage(i,t){let e,n;return i.referenceId===t.referenceId?(e="A new license has been registered, but your current license remains unchanged because it has a higher tier or a later expiration date.",n=8e3):i.edition===t.edition?(e="The license has been updated!",n=3500):(e=`The license has been ${t.edition>i.edition?"upgraded":"downgraded"} to ${M[t.edition]} Edition!`,n=5250),{message:e,duration:n}}};o.\u0275fac=function(t){return new(t||o)(b(ee),b(te),b(S))},o.\u0275prov=j({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();function Ve(r,o){r&1&&(a(0,"div",14)(1,"div",15),x(2,"img",16),s(),x(3,"div",17),s())}function Be(r,o){r&1&&(a(0,"mat-error"),d(1,"License key is required"),s())}function Re(r,o){if(r&1&&(a(0,"a",18)(1,"span"),d(2,"Get a License"),s()()),r&2){let Ee=z();h("href",Ee.licenseLink.url,R)}}var ct=(()=>{let o=class o{constructor(i,t,e,n,c,l){this.licensesService=i,this.openSettingsService=t,this.utilityService=e,this.windowService=n,this.dialogRef=c,this.snackBar=l,this.hideLicenseKey=!0,this.subscriptions=new k,this.licenseLink={url:"",isActive:!1},this.isLoading=!1,this.actionName=n.license.edition===M.Enterprise?"Re-new":"Upgrade"}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){let i=this.openSettingsService.getLinks().subscribe(t=>{let e=t.license;e&&(this.licenseLink.url=e.url,this.licenseLink.isActive=e.isActive)});this.subscriptions.add(i)}upgradeLicense(i){if(!i)return;this.isLoading=!0;let t=this.licensesService.saveLicense({licenseKey:i}).pipe(T(()=>this.licensesService.getCurrentLicense())).subscribe({next:e=>{let n=e.data;if(!n){this.isLoading=!1;return}let c=this.windowService.license,l=this.licensesService.getLicenseUpdateMessage(c,n);this.windowService.updateLicense(n),this.snackBar.open(l.message,"Close",{horizontalPosition:"right",verticalPosition:"top",duration:l.duration}),this.isLoading=!1,this.dialogRef.close(!0)},error:e=>{let n=e.error;n&&n.errors?this.utilityService.error(n.errors,3500):this.utilityService.simpleError(e.message,2250),this.isLoading=!1}});this.subscriptions.add(t)}upload(i){this.utilityService.upload(i.target.files[0]).then(t=>{let e=t.trim();this.upgradeLicense(e)}).catch(t=>{this.snackBar.open(`Error occurred while uploading file. Error: ${t}`,"Close",{horizontalPosition:"right",verticalPosition:"top",duration:8e3})})}toggleLicenseKeyVisibility(){this.hideLicenseKey=!this.hideLicenseKey}};o.\u0275fac=function(t){return new(t||o)(m(ke),m(we),m(Se),m(S),m(Me),m(me))},o.\u0275cmp=v({type:o,selectors:[["ng-component"]],decls:29,vars:9,consts:[["licenseInput","ngModel"],["fileInput",""],["class","loading-container",4,"ngIf"],["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","","matTooltip","Close","matTooltipPosition","above",1,"position-absolute","r-0","t-0"],["appearance","outline",1,"full-width"],["matInput","","required","",3,"ngModelChange","type","ngModel"],["mat-icon-button","","matSuffix","","matTooltip","Upload","color","primary",3,"click"],["type","file","accept",".txt,.key",1,"d-none",3,"change"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["align","end"],["mat-button","","target","_blank",3,"href",4,"ngIf"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"],[1,"loading-container"],[1,"mat-bg-primary","position-absolute","rounded-circle","app-icon-animation"],[1,"app-icon","bg-white"],[1,"loading-spinner"],["mat-button","","target","_blank",3,"href"]],template:function(t,e){if(t&1){let n=P();y(0,Ve,4,0,"div",2),a(1,"h2",3),d(2),a(3,"button",4)(4,"mat-icon"),d(5,"close"),s()()(),a(6,"mat-dialog-content")(7,"p"),d(8,"Please enter your license below:"),s(),a(9,"mat-form-field",5)(10,"mat-label"),d(11,"License Key"),s(),a(12,"input",6,0),J("ngModelChange",function(l){return u(n),G(e.licenseKey,l)||(e.licenseKey=l),f(l)}),s(),a(14,"button",7),g("click",function(){u(n);let l=C(18);return f(l.click())}),a(15,"mat-icon"),d(16,"upload"),s(),a(17,"input",8,1),g("change",function(l){return u(n),f(e.upload(l))}),s()(),a(19,"button",9),g("click",function(){return u(n),f(e.toggleLicenseKeyVisibility())}),a(20,"mat-icon"),d(21),s()(),a(22,"mat-hint"),d(23,"A restart may be required for full changes to take effect."),s(),y(24,Be,2,0,"mat-error",10),s()(),a(25,"mat-dialog-actions",11),y(26,Re,3,1,"a",12),a(27,"button",13),g("click",function(){return u(n),f(e.upgradeLicense(e.licenseKey))}),d(28),s()()}if(t&2){let n=C(13);h("ngIf",e.isLoading),p(2),W(" ",e.actionName," OpenSettings "),p(10),h("type",e.hideLicenseKey?"password":"text"),Q("ngModel",e.licenseKey),p(9),L(e.hideLicenseKey?"visibility_off":"visibility"),p(3),h("ngIf",n.invalid),p(2),h("ngIf",e.licenseLink.isActive&&e.licenseLink.url),p(),h("disabled",!e.licenseKey),p(),L(e.actionName)}},dependencies:[Z,ie,oe,re,ne,xe,_e,Le,Ce,le,se,ce,de,ve,ge,pe,ue,he,fe,be],encapsulation:2});let r=o;return r})();export{ke as a,ct as b,ze as c,Oe as d};
