import{a as Z,b as ie,d as oe}from"./chunk-KD5YJ3WX.js";import{a as ae,b as re,c as se,d as le,e as ce,f as me,h as de,j as pe,k as ue}from"./chunk-4D5NLZVU.js";import"./chunk-4VZSEJXQ.js";import"./chunk-IDIORXPO.js";import{a as U}from"./chunk-NNDRUWYZ.js";import{a as ee}from"./chunk-SCCDE5QU.js";import{c as te,i as ne}from"./chunk-HLAZOYHB.js";import{D as W,E as q,F as G,H as J,I as K,L as Q,O as X,P as Y,t as B,u as F}from"./chunk-M66XJPMI.js";import{A as T,Da as m,Fa as d,M as I,Mb as R,Oa as n,Pa as i,Qa as C,Ra as h,S as b,Sa as v,Tb as y,Ua as L,Vb as j,Xa as D,Z as N,Za as S,_ as x,da as V,ea as P,g as E,gb as a,hb as u,ic as A,jc as H,kd as O,ld as $,od as z,ra as M,sa as s,ta as f}from"./chunk-YYVWG2ID.js";function Ce(e,t){e&1&&(n(0,"th",21),a(1,"Attribute"),i())}function Se(e,t){if(e&1&&(n(0,"td",22),a(1),i()),e&2){let o=t.$implicit;s(),u(o.key)}}function be(e,t){e&1&&(n(0,"th",21),a(1,"Value"),i())}function xe(e,t){if(e&1&&(n(0,"td",23),a(1),i()),e&2){let o=t.$implicit;s(),u(o.value)}}function ye(e,t){e&1&&C(0,"tr",24)}function we(e,t){if(e&1&&(n(0,"mat-card-actions",17)(1,"a",25),a(2,"View Release Notes"),i()()),e&2){let o=S();s(),d("href",o.viewReleaseNotes(o.packVersion),M)}}function ge(e,t){e&1&&(n(0,"th",21),a(1,"Attribute"),i())}function Ie(e,t){if(e&1&&(n(0,"td",22),a(1),i()),e&2){let o=t.$implicit;s(),u(o.key)}}function Me(e,t){e&1&&(n(0,"th",21),a(1,"Value"),i())}function De(e,t){if(e&1&&(n(0,"td",23),a(1),i()),e&2){let o=t.$implicit;s(),u(o.value)}}function Ae(e,t){e&1&&C(0,"tr",24)}function ke(e,t){if(e&1&&(n(0,"mat-card-actions",17)(1,"a",25),a(2,"View Release Notes"),i()()),e&2){let o=S(2);s(),d("href",o.viewReleaseNotes(o.providerInfo.packVersion),M)}}function Ee(e,t){if(e&1&&(n(0,"mat-card",13)(1,"mat-card-header",2)(2,"mat-card-title",3),a(3,"Provider Information"),i()(),n(4,"mat-card-content")(5,"table",4),h(6,5),m(7,ge,2,0,"th",6)(8,Ie,2,1,"td",7),v(),h(9,8),m(10,Me,2,0,"th",6)(11,De,2,1,"td",9),v(),m(12,Ae,1,0,"tr",10),i()(),m(13,ke,3,1,"mat-card-actions",11),i()),e&2){let o=S();s(5),d("dataSource",o.providerDataSource),s(7),d("matRowDefColumns",o.displayedColumns),s(),d("ngIf",o.releaseNotes.isActive&&o.releaseNotes.url)}}function Te(e,t){e&1&&(n(0,"th",21),a(1,"Attribute"),i())}function Ne(e,t){if(e&1&&(n(0,"td",22),a(1),i()),e&2){let o=t.$implicit;s(),u(o.key)}}function Ve(e,t){e&1&&(n(0,"th",21),a(1,"Value"),i())}function Pe(e,t){if(e&1&&(n(0,"td",23),a(1),i()),e&2){let o=t.$implicit;s(),u(o.value)}}function Le(e,t){e&1&&C(0,"tr",24)}function Re(e,t){if(e&1){let o=L();n(0,"button",26),D("click",function(){V(o);let l=S();return P(l.deleteLicense())}),a(1,"Delete"),i()}}var he=(()=>{let t=class t{constructor(c,l,r,p,w,_){this.windowService=c,this.openSettingsService=l,this.licensesService=r,this.datePipe=p,this.dialog=w,this.snackBar=_,this.isProvider=!1,this.releaseNotes={url:"",isActive:!1},this.displayedColumns=["key","value"],this.appDataSource=[],this.providerDataSource=[],this.licenseDataSource=[],this.subscriptions=new E}ngOnInit(){this.isProvider=this.windowService.isProvider,this.providerInfo=this.windowService.providerInfo,this.packVersion=this.windowService.packVersion,this.version=this.windowService.version,this.clientName=this.windowService.clientName,this.appDataSource=[{key:"Name",value:this.clientName},{key:"Version",value:"v"+this.version},{key:"OpenSettings Pack Version",value:"v"+this.packVersion}],this.providerDataSource=[{key:"Name",value:this.providerInfo.clientName},{key:"Version",value:"v"+this.providerInfo.version},{key:"OpenSettings Pack Version",value:"v"+this.providerInfo.packVersion}];let c=this.windowService.license$.subscribe(r=>{this.license=r,this.initializeLicenseDataSource()});this.subscriptions.add(c);let l=this.openSettingsService.getLinks().subscribe(r=>{let p=r.releaseNotes;p&&(this.releaseNotes.url=p.url,this.releaseNotes.isActive=p.isActive)});this.subscriptions.add(l)}initializeLicenseDataSource(){this.licenseDataSource=[],this.license&&(this.license.holder&&this.licenseDataSource.push({key:"Holder",value:this.license.holder}),this.license.referenceId&&this.licenseDataSource.push({key:"Reference Id",value:this.license.referenceId}),this.license.edition&&this.licenseDataSource.push({key:"Edition",value:this.license.editionStringRepresentation}),this.license.issuedAt&&this.licenseDataSource.push({key:"Activated On",value:this.datePipe.transform(this.license.issuedAt,"dd-MM-yyyy HH:mm")??""}),this.license.expiryDate&&this.licenseDataSource.push({key:"Expiry Date",value:this.datePipe.transform(this.license.expiryDate,"dd-MM-yyyy HH:mm")??""}),this.licenseDataSource.push({key:"Status",value:this.license.isExpired?"Inactive":"Active"}))}viewReleaseNotes(c){if(c){let l=c.split(".")[0];return this.releaseNotes.url.replace("%(MajorVersion)",l).replace("%(Version)",c)}return""}upgradeLicense(){this.dialog.open(ie,{width:"500px",height:"265px",minWidth:"inherit",maxWidth:"inherit",autoFocus:!1})}deleteLicense(){let c=this.license?.referenceId;if(!c)return;let l="Confirm delete",r=`Are you sure you want to delete the '${c}' license? This action cannot be undone.`,p={title:l,message:r,requireConfirmation:!0},w=this.dialog.open(ne,{width:"500px",data:p}).afterClosed().pipe(T(_=>!!_),I(()=>this.licensesService.deleteLicense(c)),I(()=>this.licensesService.getCurrentLicense())).subscribe({next:_=>{let g=_.data;if(!g)return;let _e=this.windowService.license,k=this.licensesService.getLicenseUpdateMessage(_e,g);this.windowService.updateLicense(g),this.snackBar.open(k.message,"Close",{horizontalPosition:"right",verticalPosition:"top",duration:k.duration})}});this.subscriptions.add(w)}};t.\u0275fac=function(l){return new(l||t)(f(H),f(ee),f(Z),f(y),f(te),f(U))},t.\u0275cmp=N({type:t,selectors:[["ng-component"]],decls:42,vars:8,consts:[[1,"px-3"],[1,"title","mb-3"],[1,"mb-2"],[1,"card-title"],["mat-table","",3,"dataSource"],["matColumnDef","key"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","font-weight-500 w-50",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"card-title","w-100","d-flex"],[1,"spacer"],["matIconPosition","right","fontIcon","info","matTooltip","It shows the current license. Only active license will be shown here. If multiple licenses added, the highest edition with the longest expiry date takes precedence.","matTooltipPosition","below"],["align","end"],["mat-button","","color","primary mr-3",3,"click"],["mat-button","","color","warn",3,"click",4,"ngIf"],[1,"footer","justify-content-center","d-flex","text-muted","p-3"],["mat-header-cell",""],["mat-cell","",1,"font-weight-500","w-50"],["mat-cell",""],["mat-row",""],["mat-button","","color","primary","target","_blank",3,"href"],["mat-button","","color","warn",3,"click"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"About"),i()(),n(4,"mat-card")(5,"mat-card-header",2)(6,"mat-card-title",3),a(7,"Application Information"),i()(),n(8,"mat-card-content")(9,"table",4),h(10,5),m(11,Ce,2,0,"th",6)(12,Se,2,1,"td",7),v(),h(13,8),m(14,be,2,0,"th",6)(15,xe,2,1,"td",9),v(),m(16,ye,1,0,"tr",10),i()(),m(17,we,3,1,"mat-card-actions",11),i(),m(18,Ee,14,3,"mat-card",12),n(19,"mat-card",13)(20,"mat-card-header",2)(21,"mat-card-title",14)(22,"span"),a(23,"License Information"),i(),C(24,"span",15)(25,"mat-icon",16),i()(),n(26,"mat-card-content")(27,"table",4),h(28,5),m(29,Te,2,0,"th",6)(30,Ne,2,1,"td",7),v(),h(31,8),m(32,Ve,2,0,"th",6)(33,Pe,2,1,"td",9),v(),m(34,Le,1,0,"tr",10),i()(),n(35,"mat-card-actions",17)(36,"button",18),D("click",function(){return r.upgradeLicense()}),a(37),i(),m(38,Re,2,0,"button",19),i()(),n(39,"div",20)(40,"span"),a(41,"Copyright \xA9 2024 OpenSettings. All rights reserved."),i()()()),l&2&&(s(9),d("dataSource",r.appDataSource),s(7),d("matRowDefColumns",r.displayedColumns),s(),d("ngIf",r.releaseNotes.isActive&&r.releaseNotes.url),s(),d("ngIf",!r.isProvider),s(9),d("dataSource",r.licenseDataSource),s(7),d("matRowDefColumns",r.displayedColumns),s(3),u((r.license==null?null:r.license.edition)===500?"Re-new":"Upgrade"),s(),d("ngIf",r.license==null?null:r.license.referenceId))},dependencies:[R,W,J,G,K,q,$,O,ae,se,le,re,de,ce,me,pe,B,X],styles:[".card-title[_ngcontent-%COMP%]{font-size:var(--mat-expansion-header-text-size)}  .mat-mdc-card-header .mat-mdc-card-header-text{width:100%!important}"]});let e=t;return e})();var je=[{path:"",component:he}],ve=(()=>{let t=class t{};t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=x({type:t}),t.\u0275inj=b({imports:[A.forChild(je),A]});let e=t;return e})();var pt=(()=>{let t=class t{};t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=x({type:t}),t.\u0275inj=b({providers:[y],imports:[j,ve,Q,z,ue,F,Y,oe]});let e=t;return e})();export{pt as AboutModule};
