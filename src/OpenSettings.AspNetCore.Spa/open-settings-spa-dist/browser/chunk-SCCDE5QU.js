import{B as n,M as p,N as u,R as d,U as o,Wb as a,Yb as f,i as c,j as l,jc as g,nc as k,p as s,s as r}from"./chunk-YYVWG2ID.js";var y=(()=>{let e=class e{constructor(t,i,m){this.httpClient=t,this.authService=i,this.headers=new a,this.destroy$=new c,this.linksLoadingSubject$=new l(!1),this.isLinksLoading=!1,this.linksData=null,this.route=m.controllerOptions.route,this.authService.isAuthenticated$.pipe(u(this.destroy$)).subscribe(b=>{this.headers=b?new a({Authorization:`${this.authService.token}`}):new a})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getSponsors(){let t=this.route+"/v1/open-settings/configs-data/sponsors";return this.httpClient.get(t,{headers:this.headers}).pipe(r(i=>({data:i,fromFallback:!1})),n(()=>this.getSponsorsFromFallback()))}getSponsorsFromFallback(){return this.httpClient.get(`assets/sponsors.json?v=${new Date().getTime()}`).pipe(r(t=>({data:t,fromFallback:!0})))}getLinks(){if(this.linksData)return s(this.linksData);if(this.isLinksLoading)return this.linksLoadingSubject$.pipe(p(()=>s(this.linksData??{})));this.isLinksLoading=!0,this.linksLoadingSubject$.next(!0);let t=this.route+"/v1/open-settings/configs-data/links";return this.httpClient.get(t,{headers:this.headers}).pipe(r(i=>(this.linksData=i,this.isLinksLoading=!1,this.linksLoadingSubject$.next(!1),i)),n(()=>s({})))}getNotifications(){let t=this.route+"/v1/open-settings/configs-data/notifications";return this.httpClient.get(t,{headers:this.headers}).pipe(r(i=>i),n(()=>s([])))}};e.\u0275fac=function(i){return new(i||e)(o(f),o(k),o(g))},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let h=e;return h})();export{y as a};
