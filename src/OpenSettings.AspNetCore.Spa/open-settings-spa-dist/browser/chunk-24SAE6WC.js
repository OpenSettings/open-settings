import{a as Le,b as ke,d as Te,e as O,f as Ve}from"./chunk-5AEQP52B.js";import{a as Ce}from"./chunk-SCCDE5QU.js";import{a as Re,b as De,c as Ee,d as Oe}from"./chunk-BHTWAJBA.js";import{a as Me,b as Fe,c as E,d as Ie}from"./chunk-YB7VOYSB.js";import{c as we,i as ye}from"./chunk-HLAZOYHB.js";import{B as ue,D as ge,F as he,J as Se,L as be,O as ve,P as xe,f as ie,i as ne,q as oe,s as pe,t as me,u as de,v as _e,y as fe}from"./chunk-M66XJPMI.js";import{Da as _,Fa as p,Kb as G,Lb as H,Mb as K,Oa as r,Pa as s,Qa as b,S as F,Tb as Y,Ua as y,Ub as J,V as A,Vb as X,Xa as S,Z as Q,Za as f,_ as I,a as w,ab as N,cb as B,cc as Z,da as g,db as j,ea as h,eb as W,ed as ae,fb as C,fc as ee,g as z,gb as m,hb as v,ib as L,ic as te,jc as D,kb as k,kd as re,lb as T,mb as V,md as se,nd as le,od as ce,qb as U,ra as P,sa as c,ta as x,ub as R,vb as q,wb as $,xb as M}from"./chunk-YYVWG2ID.js";var je=e=>({"past-sponsor":e});function We(e,o){e&1&&(r(0,"mat-option",10),m(1,"Past sponsors"),s()),e&2&&p("value",0)}function qe(e,o){if(e&1&&(r(0,"mat-option",10),m(1),s()),e&2){let n=o.$implicit;p("value",n.key),c(),v(n.value.name)}}function ze(e,o){if(e&1){let n=y();r(0,"button",22),S("click",function(){g(n);let t=f();return h(t.clearFilter())}),r(1,"mat-icon"),m(2,"clear"),s(),m(3," Clear filter "),s()}}function Qe(e,o){if(e&1&&b(0,"mat-icon",31),e&2){let n=f().ngIf;N("svgIcon",n.iconName)}}function Ue(e,o){if(e&1&&(r(0,"mat-icon",32),m(1),s()),e&2){let n=f().ngIf;c(),v(n.iconName!==""?n.iconName:"coffee")}}function $e(e,o){if(e&1&&(r(0,"span",29),_(1,Qe,1,1,"mat-icon",30)(2,Ue,2,1,"ng-template",null,4,M),m(4),s()),e&2){let n=o.ngIf,a=C(3);c(),p("ngIf",n.svgIconDef)("ngIfElse",a),c(3),L("| ",n.name," ")}}function Ge(e,o){if(e&1&&b(0,"img",40),e&2){let n=f().$implicit;p("src",n.imageUrl,P)("alt",n.name+" IMG")}}function He(e,o){if(e&1){let n=y();r(0,"button",41),S("click",function(t){g(n);let i=f().$implicit,l=f(3);return h(l.confirmationRequiredToOpenLink(i.url,t))}),b(1,"mat-icon",42),s()}}function Ke(e,o){if(e&1&&(r(0,"mat-icon",43),R(1,"date"),m(2,"info"),s()),e&2){let n=f().$implicit;p("matTooltip","From "+$(1,1,n.createdOn,"mediumDate"))}}function Ye(e,o){if(e&1&&(r(0,"mat-card",33)(1,"div",34),_(2,Ge,1,2,"img",35),r(3,"div",36)(4,"mat-card-content",37),m(5),_(6,He,2,0,"button",38),s()()(),_(7,Ke,3,4,"mat-icon",39),s()),e&2){let n=o.$implicit;f(3);let a=C(49);p("ngClass",U(6,je,!n.isActive)),c(2),p("ngIf",n.imageUrl)("ngIfElse",a),c(3),L(" ",n.name," "),c(),p("ngIf",n.url&&n.isActive),c(),p("ngIf",n.isActive)}}function Je(e,o){if(e&1&&(r(0,"mat-expansion-panel",25)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),_(3,$e,5,3,"span",26),s()(),r(4,"div",27),_(5,Ye,8,8,"mat-card",28),s()()),e&2){let n=o.$implicit,a=f(2);c(3),p("ngIf",a.selectedRawResponseData.classIdMappings[n.key]),c(2),p("ngForOf",n.value)}}function Xe(e,o){if(e&1&&(r(0,"mat-accordion",23),_(1,Je,6,2,"mat-expansion-panel",24),R(2,"keyvalue"),s()),e&2){let n=f();c(),p("ngForOf",q(2,1,n.filteredSponsors))}}function Ze(e,o){if(e&1){let n=y();r(0,"button",45),S("click",function(){g(n);let t=f(2);return h(t.openBecomeSponsorMenu())}),m(1),b(2,"mat-icon",46),s()}if(e&2){let n=f(2);c(),L(" We currently don't have any sponsors",n.selectedClassFilter===null?"":" for this category",", but that's okay! Our mission goes beyond this. ")}}function et(e,o){if(e&1&&_(0,Ze,3,1,"button",44),e&2){let n=f();p("ngIf",n.selectedStatusFilter!==0)}}function tt(e,o){if(e&1&&b(0,"mat-icon",49),e&2){let n=f().$implicit;N("svgIcon",n.iconName)}}function it(e,o){if(e&1&&(r(0,"mat-icon"),m(1),s()),e&2){let n=f().$implicit;c(),v(n.iconName!==""?n.iconName:"favorite")}}function nt(e,o){if(e&1&&(r(0,"a",47)(1,"span"),m(2),s(),_(3,tt,1,1,"mat-icon",48)(4,it,2,1,"ng-template",null,4,M),s()),e&2){let n=o.$implicit,a=C(5);p("href",n.url,P),c(2),v(n.name),c(),p("ngIf",n.svgIconDef)("ngIfElse",a)}}function ot(e,o){e&1&&b(0,"mat-progress-bar",50)}function at(e,o){e&1&&b(0,"img",51)}var Pe=(()=>{let o=class o{constructor(a,t,i,l,d){this.openSettingsService=a,this.iconRegistry=t,this.sanitizer=i,this.windowService=l,this.dialog=d,this.subscriptions=new z,this.selectedStatusFilter=1,this.selectedVersionFilter=1,this.selectedClassFilter=null,this.failedToFetchLatestVersion=!1,this.isRawDataFromService=!1,this.hasAnySponsors=!0,this.hasPastSponsors=!0,this.isLoading=!1,this.selectedRawResponseData={becomeSponsorLinks:[],classIdMappings:{},frequencyIdMappings:{},sponsors:[]},this.rawResponseDataFromFallback=null,this.rawResponseDataFromService=null,this.filteredSponsors={}}ngOnInit(){this.packVersion=this.windowService.packVersion,this.startFetching();let a=this.openSettingsService.getSponsors().subscribe({next:t=>{this.failedToFetchLatestVersion=t.fromFallback,this.selectedRawResponseData=t.data,this.failedToFetchLatestVersion?(this.rawResponseDataFromFallback=w({},t.data),this.isRawDataFromService=!1,this.selectedVersionFilter=0):(this.rawResponseDataFromService=w({},t.data),this.isRawDataFromService=!0),this.handleClassIdMappings(t.data.classIdMappings),this.handleBecomeSponsorLinks(t.data.becomeSponsorLinks),this.reloadData()},error:()=>{this.stopFetching()}});this.subscriptions.add(a)}filterSponsorsVersion(){this.selectedVersionFilter===1&&this.rawResponseDataFromService&&!this.isRawDataFromService?this.switchToVersionData(this.rawResponseDataFromService):this.selectedVersionFilter===0&&this.rawResponseDataFromFallback&&this.isRawDataFromService?this.switchToVersionData(this.rawResponseDataFromFallback):this.selectedVersionFilter===0&&!this.rawResponseDataFromFallback?this.fetchFallbackSponsors():this.reloadData()}switchToVersionData(a){this.selectedRawResponseData=w({},a),this.isRawDataFromService=!this.isRawDataFromService,this.handleClassIdMappings(a.classIdMappings),this.handleBecomeSponsorLinks(a.becomeSponsorLinks),this.reloadData()}fetchFallbackSponsors(){let a=this.openSettingsService.getSponsorsFromFallback().subscribe(t=>{this.rawResponseDataFromFallback=w({},t.data),this.switchToVersionData(t.data)});this.subscriptions.add(a)}startFetching(){this.isLoading=!0}stopFetching(){this.isLoading=!1}reloadData(){let a=this.selectedRawResponseData.sponsors;this.hasPastSponsors=a.some(t=>!t.isActive),this.selectedStatusFilter!==null&&(a=a.filter(t=>this.selectedStatusFilter===1?t.isActive:!t.isActive)),this.selectedClassFilter!==null&&(a=a.filter(t=>t.classId==this.selectedClassFilter)),this.filteredSponsors=this.groupAndSortSponsors(a),this.hasAnySponsors=Object.keys(this.filteredSponsors).length>0,this.stopFetching()}groupAndSortSponsors(a){let t=a.sort((i,l)=>i.classId-l.classId).reduce((i,l)=>{let d=l.classId;return i[d]||(i[d]=[]),i[d].push(l),i},{});for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].sort((l,d)=>l.isActive!==d.isActive?l.isActive?-1:1:l.sortOrder-d.sortOrder);return t}handleClassIdMappings(a){Object.values(a).forEach(t=>{t.svgIconDef&&t.iconName&&this.iconRegistry.addSvgIconLiteral(t.iconName,this.sanitizer.bypassSecurityTrustHtml(t.svgIconDef))})}handleBecomeSponsorLinks(a){a.forEach(t=>{t.svgIconDef&&t.iconName&&this.iconRegistry.addSvgIconLiteral(t.iconName,this.sanitizer.bypassSecurityTrustHtml(t.svgIconDef))})}openBecomeSponsorMenu(){this.selectedRawResponseData.becomeSponsorLinks.length===1?this.openLink(this.selectedRawResponseData.becomeSponsorLinks[0].url):this.matMenuTrigger?.openMenu()}confirmationRequiredToOpenLink(a,t){t.preventDefault();let i="Warn!",l=`You are about to navigate to an external website and we have no control the content, privacy policies, or data collection practices of this website. Do you want to proceed? <br /><br />Url: <small><q>${a}</q></small>`,d=this.dialog.open(ye,{width:"500px",data:{title:i,message:l}}).afterClosed().subscribe(u=>{u&&this.openLink(a)});this.subscriptions.add(d)}openLink(a){window.open(a,"_blank")}clearFilter(){this.selectedStatusFilter=null,this.selectedClassFilter=null,this.failedToFetchLatestVersion?this.reloadData():(this.selectedVersionFilter=1,this.filterSponsorsVersion())}expandAll(){this.accordion.openAll()}collapseAll(){this.accordion.closeAll()}};o.\u0275fac=function(t){return new(t||o)(x(Ce),x(pe),x(Z),x(D),x(we))},o.\u0275cmp=Q({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(t&1&&(B(O,5),B(E,5)),t&2){let l;j(l=W())&&(i.accordion=l.first),j(l=W())&&(i.matMenuTrigger=l.first)}},decls:50,vars:19,consts:[["filterSelect",""],["noSponsors",""],["sponsorMenu","matMenu"],["noImage",""],["matIcon",""],[1,"px-3"],[1,"title","mb-3"],[1,"d-flex"],["appearance","outline",1,"w-25","mr-2","border-bottom-1"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngIf"],[3,"value","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","mt-2","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],[1,"spacer"],["mat-icon-button","","matTooltip","Expand All",3,"click"],["mat-icon-button","","matTooltip","Collapse All",3,"click"],["multi","",4,"ngIf","ngIfElse"],["mat-fab","","extended","","color","primary","matTooltip","Become a sponsor",1,"position-fixed","b-0","r-0","mr-3","mb-3",3,"click","matMenuTriggerFor"],["mat-menu-item","","target","_blank",3,"href",4,"ngFor","ngForOf"],["mode","indeterminate","class","position-fixed l-0 b-0",4,"ngIf"],["mat-stroked-button","","color","primary",1,"mt-2",3,"click"],["multi",""],["expanded","true",4,"ngFor","ngForOf"],["expanded","true"],["style","display: inline-flex; align-items: center;",4,"ngIf"],[1,"card-container"],["class","card-item mb-2","appearance","outlined",3,"ngClass",4,"ngFor","ngForOf"],[2,"display","inline-flex","align-items","center"],["class","mr-2",3,"svgIcon",4,"ngIf","ngIfElse"],[1,"mr-2",3,"svgIcon"],[1,"mr-2"],["appearance","outlined",1,"card-item","mb-2",3,"ngClass"],[1,"card-image-container"],["mat-card-image","",3,"src","alt",4,"ngIf","ngIfElse"],[1,"card-overlay"],[2,"padding","8px"],["mat-icon-button","","class","card-link",3,"click",4,"ngIf"],["class","position-absolute t-0 r-0 p-1","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["mat-card-image","",3,"src","alt"],["mat-icon-button","",1,"card-link",3,"click"],["fontIcon","open_in_new"],["matTooltipPosition","above",1,"position-absolute","t-0","r-0","p-1",3,"matTooltip"],["color","","mat-fab","","extended","","matIconSuffix","","class","position-fixed b-0 r-0 mr-3 mb-3 l-0",3,"disabled","click",4,"ngIf"],["color","","mat-fab","","extended","","matIconSuffix","",1,"position-fixed","b-0","r-0","mr-3","mb-3","l-0",3,"click","disabled"],["matIconSuffix","","fontIcon","mood"],["mat-menu-item","","target","_blank",3,"href"],[3,"svgIcon",4,"ngIf","ngIfElse"],[3,"svgIcon"],["mode","indeterminate",1,"position-fixed","l-0","b-0"],[1,"app-icon","mat-bg-primary","mask-size-cover"]],template:function(t,i){if(t&1){let l=y();r(0,"div",5)(1,"div",6)(2,"h1"),m(3,"Sponsors"),s()(),r(4,"div",7)(5,"mat-form-field",8)(6,"mat-label"),m(7,"Filter by status"),s(),r(8,"mat-select",9,0),V("ngModelChange",function(u){return g(l),T(i.selectedStatusFilter,u)||(i.selectedStatusFilter=u),h(u)}),S("ngModelChange",function(){return g(l),h(i.reloadData())}),r(10,"mat-option",10),m(11,"Current sponsors"),s(),_(12,We,2,1,"mat-option",11),s()(),r(13,"mat-form-field",8)(14,"mat-label"),m(15,"Filter by version"),s(),r(16,"mat-select",9,0),V("ngModelChange",function(u){return g(l),T(i.selectedVersionFilter,u)||(i.selectedVersionFilter=u),h(u)}),S("ngModelChange",function(){return g(l),h(i.filterSponsorsVersion())}),r(18,"mat-option",12),m(19),s(),r(20,"mat-option",10),m(21),s()()(),r(22,"mat-form-field",8)(23,"mat-label"),m(24,"Filter by class"),s(),r(25,"mat-select",9,0),V("ngModelChange",function(u){return g(l),T(i.selectedClassFilter,u)||(i.selectedClassFilter=u),h(u)}),S("ngModelChange",function(){return g(l),h(i.reloadData())}),_(27,qe,2,2,"mat-option",13),R(28,"keyvalue"),s()(),_(29,ze,4,0,"button",14),b(30,"span",15),r(31,"button",16),S("click",function(){return g(l),h(i.expandAll())}),r(32,"mat-icon"),m(33,"expand_more"),s()(),r(34,"button",17),S("click",function(){return g(l),h(i.collapseAll())}),r(35,"mat-icon"),m(36,"expand_less"),s()()(),_(37,Xe,3,3,"mat-accordion",18)(38,et,1,1,"ng-template",null,1,M),s(),r(40,"button",19),S("click",function(){return g(l),h(i.selectedRawResponseData.becomeSponsorLinks.length===1&&i.openLink(i.selectedRawResponseData.becomeSponsorLinks[0].url))}),m(41," Sponsor "),r(42,"mat-icon"),m(43,"favorite"),s()(),r(44,"mat-menu",null,2),_(46,nt,6,4,"a",20),s(),_(47,ot,1,0,"mat-progress-bar",21)(48,at,1,0,"ng-template",null,3,M)}if(t&2){let l=C(39),d=C(45);c(8),k("ngModel",i.selectedStatusFilter),c(2),p("value",1),c(2),p("ngIf",i.hasPastSponsors),c(4),k("ngModel",i.selectedVersionFilter),c(2),p("value",1)("disabled",i.failedToFetchLatestVersion),c(),v(i.failedToFetchLatestVersion?"Latest (failed to fetch)":"Latest"),c(),p("value",0),c(),v("v"+i.packVersion),c(4),k("ngModel",i.selectedClassFilter),c(2),p("ngForOf",q(28,17,i.selectedRawResponseData.classIdMappings)),c(2),p("ngIf",i.selectedStatusFilter!==null||i.selectedVersionFilter===0&&!i.failedToFetchLatestVersion||i.selectedClassFilter!==null),c(8),p("ngIf",i.hasAnySponsors)("ngIfElse",l),c(3),p("matMenuTriggerFor",i.selectedRawResponseData.becomeSponsorLinks.length>1?d:null),c(6),p("ngForOf",i.selectedRawResponseData.becomeSponsorLinks),c(),p("ngIf",i.isLoading)}},dependencies:[G,H,K,ie,ne,ue,_e,fe,Re,ae,me,O,Le,ke,Te,ge,he,Se,Fe,Me,E,Ee,ve,re,le,se,Y,J],styles:[".card-item[_ngcontent-%COMP%]{flex-basis:calc(16.2% - 4px);position:relative;height:150px;overflow:hidden}.card-image-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.card-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;background:#0000009e;color:#fff;text-align:center}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.card-link[_ngcontent-%COMP%]{position:absolute;right:5px;top:-5px}.past-sponsor[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}  .border-bottom-1 .mdc-notched-outline__leading,   .border-bottom-1 .mdc-notched-outline__notch,   .border-bottom-1 .mdc-notched-outline__trailing{border-bottom:1px inset!important;border:0px;border-radius:0!important}  .border-none .mdc-notched-outline__leading,   .border-none .mdc-notched-outline__notch,   .border-none .mdc-notched-outline__trailing{border-bottom:0px!important;border:0px;border-radius:0!important}"]});let e=o;return e})();var Ne=(e,o)=>{let n=A(D),a=A(ee);return n.license.edition===100?!0:(a.navigate(["/"]),!1)};var rt=[{path:"",canActivate:[Ne],component:Pe}],Be=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=I({type:o}),o.\u0275inj=F({imports:[te.forChild(rt)]});let e=o;return e})();var Yt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=I({type:o}),o.\u0275inj=F({imports:[X,Be,oe,De,de,Ve,be,Ie,Oe,xe,ce]});let e=o;return e})();export{Yt as SponsorModule};
